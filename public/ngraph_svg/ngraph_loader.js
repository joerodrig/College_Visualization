// Generated by CoffeeScript 1.8.0
(function() {
  module.exports.start = function(listeners) {
    var graph, renderer, svg;
    graph = require("ngraph.graph")();
    svg = require("simplesvg");
    renderer = require("ngraph.svg")(graph, {
      physics: {
        springLength: 325,
        springCoeff: 0.000008,
        gravity: -5,
        theta: 1,
        dragCoeff: 0.005,
        timeStep: 50,
        springTransform: function(link, spring) {
          if (link.toId === "Ithaca College") {
            spring.length = 450 + link.data * 3;
            return spring.weight = 0.5;
          }
        }
      }
    });
    renderer.node((function(_this) {
      return function(node) {
        var circ, txt, ui;
        svg = svg;
        ui = svg('g');
        circ = svg("circle").attr('fill', node.data.fill).attr('r', node.data.size).attr('class', node.data.type);
        txt = svg('text').attr('font-size', node.data.textSize).attr('text-anchor', 'middle').attr('y', parseInt("-" + node.data.size + (-18))).attr('class', node.data.type + "_label");
        txt.textContent = node.id;
        ui.append(circ);
        ui.append(txt);
        if (node.data.type === "school_node") {
          $(circ).click(function(e) {
            if (e.shiftKey === true) {
              return listeners.schoolClicked(node.id);
            }
          });
        } else if (node.data.type === "department_node") {
          $(circ).click(function(e) {
            if (e.shiftKey === true) {
              return listeners.departmentClicked(node.id);
            }
          });
        } else if (node.data.type === "user_node") {
          $(circ).click(function(e) {
            if (e.shiftKey === true) {
              return listeners.userClicked(node.id);
            }
          });
        }
        return ui;
      };
    })(this)).placeNode(function(nodeUI, pos) {
      return nodeUI.attr('transform', 'translate(' + pos.x + ',' + pos.y + ')');
    });
    renderer.link((function(_this) {
      return function(link) {
        return svg("line").attr("stroke", "#000");
      };
    })(this));
    return {
      graph: graph,
      renderer: renderer,
      svg: svg
    };
  };

}).call(this);

//# sourceMappingURL=ngraph_loader.js.map
